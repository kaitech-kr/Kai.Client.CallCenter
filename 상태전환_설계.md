# ìƒíƒœ ì „í™˜ ë§¤íŠ¸ë¦­ìŠ¤ ì„¤ê³„

## ğŸ¯ í•µì‹¬ ëª©í‘œ
**Insung ì•±ì˜ ìƒíƒœ ë³€í™”ë¥¼ ê°ì§€í•˜ì—¬ Kai DBì™€ ë‹¤ë¥¸ ì™¸ë¶€ ì•±ë“¤ì„ ë™ê¸°í™”**

---

## ğŸ“Š 1. ìƒíƒœ ì •ì˜

### Insung ì•± ìƒíƒœ
| ìƒíƒœ | ì„¤ëª… | ìµœì¢… ìƒíƒœ |
|------|------|-----------|
| ì ‘ìˆ˜ | ì£¼ë¬¸ ì ‘ìˆ˜ë¨ (ê¸°ì‚¬ ë¯¸ë°°ì •) | âŒ |
| ë°°ì°¨ | ê¸°ì‚¬ ë°°ì •ë¨ | âŒ |
| ìš´í–‰ | ê¸°ì‚¬ ìš´í–‰ ì¤‘ | âŒ |
| ì™„ë£Œ | ë°°ì†¡ ì™„ë£Œ | âœ… |
| ì·¨ì†Œ | ì£¼ë¬¸ ì·¨ì†Œë¨ | âœ… |
| ëŒ€ê¸° | ì¼ì‹œ ëŒ€ê¸° ìƒíƒœ | âŒ |
| ì˜ˆì•½ | ì˜ˆì•½ ì£¼ë¬¸ | âŒ |

### StateFlag (PostgService_Common_OrderState)
| í”Œë˜ê·¸ | ì˜ë¯¸ | ì²˜ë¦¬ ë°©í–¥ |
|--------|------|-----------|
| `NotChanged` | Kai DB ë³€í™” ì—†ìŒ | **Insung â†’ Kai** (ì—­ë°©í–¥) |
| `Existed_WithSeqno` | ì´ë¯¸ ë“±ë¡ë¨ | Kai â†’ Insung |
| `Updated_Assume` | Kai DB ì—…ë°ì´íŠ¸ ì¶”ì • | Kai â†’ Insung |
| `Updated_Status` | ìƒíƒœë§Œ ë³€ê²½ë¨ | Kai â†’ Insung |
| `Updated_Etc` | ê¸°íƒ€ í•„ë“œ ë³€ê²½ë¨ | Kai â†’ Insung |
| `CompletedExternal` | ì™¸ë¶€ì—ì„œ ì™„ë£Œë¨ | Kai â†’ Insung (ì·¨ì†Œ) |

---

## ğŸ”„ 2. ì¸ì„± ì•± ìƒíƒœì˜ ì‹¤ì œ ì˜ë¯¸

### âš ï¸ ì¤‘ìš”: Insung ìƒíƒœ â‰  Kai ìƒíƒœ

| Insung ìƒíƒœ | ì‹¤ì œ ì˜ë¯¸ | ê¸°ì‚¬ í™•ì •? | Kai ìƒíƒœ ë§¤í•‘ |
|-------------|----------|-----------|--------------|
| ì ‘ìˆ˜ | ì£¼ë¬¸ ë“±ë¡ë¨, ê¸°ì‚¬ ë¯¸ë°°ì • | âŒ | **ì ‘ìˆ˜** |
| ë°°ì°¨ | ê¸°ì‚¬ê°€ "ê´€ì‹¬ ìˆìŒ" í‘œì‹œ (í™•ì • ì•„ë‹˜) | âŒ | **ì ‘ìˆ˜** |
| ìš´í–‰ | ë°°ë‹¬ ìˆ˜í–‰ ì˜ì‚¬ í‘œì‹œ (40ì´ˆ ë‚´ ì·¨ì†Œ ê°€ëŠ¥) | â±ï¸ | **ì ‘ìˆ˜** (40ì´ˆ ì´ë‚´) |
| ìš´í–‰ | 40ì´ˆ ê²½ê³¼ â†’ ê¸°ì‚¬ í™•ì • | âœ… | **ë°°ì°¨** (40ì´ˆ ê²½ê³¼) |
| ì™„ë£Œ | ë°°ì†¡ ì™„ë£Œ | âœ… | **ì™„ë£Œ** |
| ì·¨ì†Œ | ì£¼ë¬¸ ì·¨ì†Œ | - | **ì·¨ì†Œ** |

### í•µì‹¬ ê·œì¹™
```
Kai "ì ‘ìˆ˜" = Insung "ì ‘ìˆ˜" OR "ë°°ì°¨" OR "ìš´í–‰(40ì´ˆ ì´ë‚´)"
Kai "ë°°ì°¨" = Insung "ìš´í–‰(40ì´ˆ ê²½ê³¼)"
Kai "ì™„ë£Œ" = Insung "ì™„ë£Œ"
Kai "ì·¨ì†Œ" = Insung "ì·¨ì†Œ"
```

---

## ğŸ”„ 3. ìƒíƒœ ì „í™˜ ì‹œë‚˜ë¦¬ì˜¤

### A. Kai â†’ Insung (í˜„ì¬ êµ¬í˜„ë¨ âœ…)
**í•¨ìˆ˜**: `CheckIsOrderAsync_AssumeKaiUpdated`

| From (Kai) | To (Insung) | ì•¡ì…˜ | useRepeat |
|------------|-------------|------|-----------|
| ì·¨ì†Œ | ì ‘ìˆ˜ | íŒì—… ì—´ê³  ìƒíƒœ ì „í™˜ | true (10íšŒ) |
| ëŒ€ê¸° | ì ‘ìˆ˜ | íŒì—… ì—´ê³  ìƒíƒœ ì „í™˜ | true (10íšŒ) |
| ì·¨ì†Œ | ëŒ€ê¸° | íŒì—… ì—´ê³  ìƒíƒœ ì „í™˜ | false (1íšŒ) |
| ì ‘ìˆ˜ | ëŒ€ê¸° | íŒì—… ì—´ê³  ìƒíƒœ ì „í™˜ | true (10íšŒ) |
| ë°°ì°¨ | ëŒ€ê¸° | íŒì—… ì—´ê³  ìƒíƒœ ì „í™˜ | true (10íšŒ) |
| ì ‘ìˆ˜ | ì·¨ì†Œ | íŒì—… ì—´ê³  ìƒíƒœ ì „í™˜ | true (10íšŒ) |
| ë°°ì°¨ | ì·¨ì†Œ | íŒì—… ì—´ê³  ìƒíƒœ ì „í™˜ | true (10íšŒ) |
| ìš´í–‰ | ì·¨ì†Œ | íŒì—… ì—´ê³  ìƒíƒœ ì „í™˜ | true (10íšŒ) |
| ì˜ˆì•½ | ì·¨ì†Œ | íŒì—… ì—´ê³  ìƒíƒœ ì „í™˜ | false (1íšŒ) |
| ì™„ë£Œ | ì·¨ì†Œ | íŒì—… ì—´ê³  ìƒíƒœ ì „í™˜ | false (1íšŒ) |
| ëŒ€ê¸° | ì·¨ì†Œ | íŒì—… ì—´ê³  ìƒíƒœ ì „í™˜ | false (1íšŒ) |
| ì ‘ìˆ˜ | ì ‘ìˆ˜ | í•„ë“œë§Œ ì—…ë°ì´íŠ¸ | true (10íšŒ) |
| ë°°ì°¨ | ë°°ì°¨ | í•„ë“œë§Œ ì—…ë°ì´íŠ¸ | true (10íšŒ) |
| ì·¨ì†Œ | ì·¨ì†Œ | í•„ë“œë§Œ ì—…ë°ì´íŠ¸ | false (1íšŒ) |
| ëŒ€ê¸° | ëŒ€ê¸° | í•„ë“œë§Œ ì—…ë°ì´íŠ¸ | false (1íšŒ) |

---

### B. Insung â†’ Kai (êµ¬í˜„ í•„ìš” âš ï¸)
**í•¨ìˆ˜**: `CheckIsOrderAsync_KaiSameInsungIfChanged`

#### ì‹œë‚˜ë¦¬ì˜¤ 1: Insung "ì ‘ìˆ˜ â†’ ë°°ì°¨" (ê¸°ì‚¬ ê´€ì‹¬ í‘œì‹œ)
**Kai ìƒíƒœ**: ì ‘ìˆ˜ ìœ ì§€ (ë³€í™” ì—†ìŒ)

| ë‹¨ê³„ | ì•¡ì…˜ | í•¨ìˆ˜/ë¡œì§ |
|------|------|-----------|
| 1 | ìƒíƒœ í™•ì¸ | Kai="ì ‘ìˆ˜", Insung="ë°°ì°¨" â†’ ì •ìƒ (ë§¤í•‘ ì¼ì¹˜) |
| 2 | Kai DB | ì—…ë°ì´íŠ¸ ì•ˆ í•¨ |
| 3 | ë‹¤ë¥¸ ì•± | ì•„ë¬´ ë™ì‘ ì•ˆ í•¨ |
| 4 | í ê´€ë¦¬ | `SuccessAndReEnqueue` (ê³„ì† ëª¨ë‹ˆí„°ë§) |

**ë¡œì§**:
```csharp
// Insung="ë°°ì°¨" â†’ KaiëŠ” "ì ‘ìˆ˜"ë¡œ ê°„ì£¼
if (kaiState == "ì ‘ìˆ˜" && (insungState == "ì ‘ìˆ˜" || insungState == "ë°°ì°¨"))
{
    // ì •ìƒ ìƒíƒœ, ëª¨ë‹ˆí„°ë§ ê³„ì†
    return SuccessAndReEnqueue();
}
```

---

#### ì‹œë‚˜ë¦¬ì˜¤ 2: Insung "ë°°ì°¨ â†’ ìš´í–‰" (ë°°ë‹¬ ìˆ˜í–‰ ì˜ì‚¬)
**Kai ìƒíƒœ**: ì ‘ìˆ˜ ìœ ì§€ (ì•„ì§ 40ì´ˆ ê²½ê³¼ ì „)

| ë‹¨ê³„ | ì•¡ì…˜ | í•¨ìˆ˜/ë¡œì§ |
|------|------|-----------|
| 1 | íƒ€ì´ë¨¸ ì‹œì‘ | ìš´í–‰ ì§„ì… ì‹œê°„ ê¸°ë¡: `item.RunStartTime = DateTime.Now` |
| 2 | Kai DB | ì—…ë°ì´íŠ¸ ì•ˆ í•¨ (ì•„ì§ ì ‘ìˆ˜) |
| 3 | ë‹¤ë¥¸ ì•± | ì•„ë¬´ ë™ì‘ ì•ˆ í•¨ |
| 4 | í ê´€ë¦¬ | `SuccessAndReEnqueue` (40ì´ˆ ê²½ê³¼ ì²´í¬ ìœ„í•´) |

**ë¡œì§**:
```csharp
// Insung="ìš´í–‰" ì§„ì…
if (kaiState == "ì ‘ìˆ˜" && insungState == "ìš´í–‰")
{
    // 40ì´ˆ íƒ€ì´ë¨¸ ì‹œì‘
    if (item.RunStartTime == null)
    {
        item.RunStartTime = DateTime.Now;
        Debug.WriteLine("ìš´í–‰ ìƒíƒœ ì§„ì… - 40ì´ˆ íƒ€ì´ë¨¸ ì‹œì‘");
    }
    return SuccessAndReEnqueue();
}
```

---

#### ì‹œë‚˜ë¦¬ì˜¤ 3: Insung "ìš´í–‰" 40ì´ˆ ê²½ê³¼ (ê¸°ì‚¬ í™•ì •!) âš ï¸ ì¶©ëŒ ì²´í¬
**Kai ìƒíƒœ**: ì ‘ìˆ˜ â†’ ë°°ì°¨ (í™•ì •)

| ë‹¨ê³„ | ì•¡ì…˜ | í•¨ìˆ˜/ë¡œì§ |
|------|------|-----------|
| 1 | 40ì´ˆ ì²´í¬ | `DateTime.Now - item.RunStartTime > 40ì´ˆ` |
| 2 | **ë‹¤ë¥¸ ì•± ìƒíƒœ ì²´í¬** | Insung2, í™”ë¬¼24ì‹œ, ì›ì½œì˜ í˜„ì¬ ìƒíƒœ í™•ì¸ |
| 3 | **ì¶©ëŒ ê°ì§€** | ë‹¤ë¥¸ ì•±ë„ "ìš´í–‰" ìƒíƒœ? â†’ ìˆ˜ë™ ì„ íƒ í•„ìš” |
| 4 | ì¶©ëŒ ì—†ìœ¼ë©´ | Kai DB ì—…ë°ì´íŠ¸ "ì ‘ìˆ˜" â†’ "ë°°ì°¨" |
| 5 | ë‹¤ë¥¸ ì•± ì·¨ì†Œ | ì ‘ìˆ˜/ë°°ì°¨ ìƒíƒœì¸ ì•±ë“¤ë§Œ ìë™ ì·¨ì†Œ |
| 6 | í ê´€ë¦¬ | `SuccessAndReEnqueue` (ì™„ë£Œê¹Œì§€ ëª¨ë‹ˆí„°ë§) |

**ì¶©ëŒ ì‹œë‚˜ë¦¬ì˜¤**:
```
ìƒí™©: Insung1 "ìš´í–‰" 40ì´ˆ ê²½ê³¼ + Insung2ë„ "ìš´í–‰" ì¤‘
ë¬¸ì œ: 2ëª…ì˜ ê¸°ì‚¬ê°€ ë™ì‹œì— ë°°ë‹¬ ì¤‘ (2ì¤‘ ë°°ì°¨!)
í•´ê²°: ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼ â†’ ìˆ˜ë™ìœ¼ë¡œ 1ê°œ ì„ íƒ
```

**ë¡œì§**:
```csharp
// Insung="ìš´í–‰" 40ì´ˆ ê²½ê³¼ ì²´í¬
if (kaiState == "ì ‘ìˆ˜" && insungState == "ìš´í–‰" && item.RunStartTime != null)
{
    TimeSpan elapsed = DateTime.Now - item.RunStartTime.Value;
    if (elapsed.TotalSeconds >= 40)
    {
        Debug.WriteLine($"  â†’ 40ì´ˆ ê²½ê³¼! ê¸°ì‚¬ í™•ì •");

        // ===== ë‹¤ë¥¸ ì•± ìƒíƒœ ì²´í¬ (ì¶©ëŒ ê°ì§€) =====
        var otherAppStates = await GetOtherAppStatesAsync(item);
        var runningApps = otherAppStates.Where(s => s.State == "ìš´í–‰").ToList();

        if (runningApps.Any())
        {
            // ì¶©ëŒ ê°ì§€! ë‹¤ë¥¸ ì•±ë„ ìš´í–‰ ì¤‘
            Debug.WriteLine($"  âš ï¸ ì¶©ëŒ ê°ì§€! ìš´í–‰ ì¤‘ì¸ ë‹¤ë¥¸ ì•±: {string.Join(", ", runningApps.Select(a => a.AppName))}");

            // ìˆ˜ë™ ì„ íƒ ëŒ€í™”ìƒì í‘œì‹œ
            var result = await ShowManualSelectionDialogAsync(item, runningApps, ctrl);

            if (result.UserCancelled)
            {
                // ì‚¬ìš©ìê°€ ë‚˜ì¤‘ì— ì²˜ë¦¬í•˜ê² ë‹¤ê³  í•¨ â†’ ì¬ì ì¬
                Debug.WriteLine($"  â†’ ì‚¬ìš©ìê°€ ìˆ˜ë™ ì„ íƒ ì·¨ì†Œ â†’ ì¬ì ì¬");
                return CommonResult_AutoAllocProcess.SuccessAndReEnqueue();
            }

            // ì‚¬ìš©ìê°€ ì„ íƒí•œ ì•±ë§Œ ìœ ì§€, ë‚˜ë¨¸ì§€ ì·¨ì†Œ
            await CancelUnselectedAppsAsync(item, result.SelectedApp, ctrl);
        }
        else
        {
            // ì¶©ëŒ ì—†ìŒ - ìë™ ì²˜ë¦¬
            Debug.WriteLine($"  â†’ ì¶©ëŒ ì—†ìŒ, ë‹¤ë¥¸ ì•± ìë™ ì·¨ì†Œ ì§„í–‰");
            await CancelOtherAppsAsync(item, ctrl);
        }

        // Kai DB ì—…ë°ì´íŠ¸ (ì¶©ëŒ ì²˜ë¦¬ í›„)
        StdResult_Int updateResult = await CommonVars.s_SrGClient.SrResult_OnlyOrderState_UpdateRowAsync_Today(
            item.NewOrder,
            "ë°°ì°¨"
        );

        if (updateResult.nResult <= 0)
        {
            Debug.WriteLine($"  â†’ Kai DB ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: {updateResult.sErrNPos}");
            return CommonResult_AutoAllocProcess.FailureAndRetry(updateResult.sErrNPos);
        }

        Debug.WriteLine($"  â†’ Kai DB ì—…ë°ì´íŠ¸ ì„±ê³µ: ì ‘ìˆ˜ â†’ ë°°ì°¨");
        item.RunStartTime = null;
        return CommonResult_AutoAllocProcess.SuccessAndReEnqueue();
    }
}
```

---

#### ì‹œë‚˜ë¦¬ì˜¤ 4: Insung "ìš´í–‰ â†’ ì ‘ìˆ˜/ë°°ì°¨" (40ì´ˆ ë‚´ ì·¨ì†Œ)
**Kai ìƒíƒœ**: ì ‘ìˆ˜ ìœ ì§€ (ë³€í™” ì—†ìŒ)

| ë‹¨ê³„ | ì•¡ì…˜ | í•¨ìˆ˜/ë¡œì§ |
|------|------|-----------|
| 1 | íƒ€ì´ë¨¸ ì·¨ì†Œ | `item.RunStartTime = null` |
| 2 | Kai DB | ì—…ë°ì´íŠ¸ ì•ˆ í•¨ (ê³„ì† ì ‘ìˆ˜) |
| 3 | ë‹¤ë¥¸ ì•± | ì•„ë¬´ ë™ì‘ ì•ˆ í•¨ |
| 4 | í ê´€ë¦¬ | `SuccessAndReEnqueue` (ê³„ì† ëª¨ë‹ˆí„°ë§) |

**ë¡œì§**:
```csharp
// Insung="ìš´í–‰" â†’ "ì ‘ìˆ˜/ë°°ì°¨" (40ì´ˆ ë‚´ ì·¨ì†Œ)
if (kaiState == "ì ‘ìˆ˜" && (insungState == "ì ‘ìˆ˜" || insungState == "ë°°ì°¨")
    && item.RunStartTime != null)
{
    // ìš´í–‰ ì·¨ì†Œë¨ - íƒ€ì´ë¨¸ ë¦¬ì…‹
    item.RunStartTime = null;
    Debug.WriteLine("ìš´í–‰ ì·¨ì†Œ - íƒ€ì´ë¨¸ ë¦¬ì…‹");
    return SuccessAndReEnqueue();
}
```

---

#### ì‹œë‚˜ë¦¬ì˜¤ 5: Insung "ìš´í–‰(í™•ì •) â†’ ì™„ë£Œ" (ë°°ì†¡ ì™„ë£Œ)
**Kai ìƒíƒœ**: ë°°ì°¨ â†’ ì™„ë£Œ

| ë‹¨ê³„ | ì•¡ì…˜ | í•¨ìˆ˜/ë¡œì§ |
|------|------|-----------|
| 1 | Kai DB ì—…ë°ì´íŠ¸ | "ë°°ì°¨" â†’ "ì™„ë£Œ" |
| 2 | ë‹¤ë¥¸ ì•± | ì—†ìŒ (ì´ë¯¸ ì·¨ì†Œë˜ì—ˆì„ ê²ƒ) |
| 3 | í ê´€ë¦¬ | `SuccessAndComplete` (ëª¨ë‹ˆí„°ë§ ì¢…ë£Œ) |

**ë¡œì§**:
```csharp
// Insung="ì™„ë£Œ"
if (kaiState == "ë°°ì°¨" && insungState == "ì™„ë£Œ")
{
    await UpdateKaiStateAsync(item, "ì™„ë£Œ");
    return SuccessAndComplete("ë°°ì†¡ ì™„ë£Œ");
}
```

---

#### ì‹œë‚˜ë¦¬ì˜¤ 6: Insung "ì ‘ìˆ˜/ë°°ì°¨/ìš´í–‰ â†’ ì·¨ì†Œ" (ì£¼ë¬¸ ì·¨ì†Œ)
**Kai ìƒíƒœ**: ì ‘ìˆ˜ â†’ ì·¨ì†Œ OR ë°°ì°¨ â†’ ì·¨ì†Œ

| ë‹¨ê³„ | ì•¡ì…˜ | í•¨ìˆ˜/ë¡œì§ |
|------|------|-----------|
| 1 | Kai DB ì—…ë°ì´íŠ¸ | í˜„ì¬ ìƒíƒœ â†’ "ì·¨ì†Œ" |
| 2 | ë‹¤ë¥¸ ì•± ì·¨ì†Œ | ëª¨ë“  ì™¸ë¶€ ì•±ì—ì„œ ì·¨ì†Œ ì²˜ë¦¬ |
| 3 | í ê´€ë¦¬ | `SuccessAndComplete` (ëª¨ë‹ˆí„°ë§ ì¢…ë£Œ) |

**ë¡œì§**:
```csharp
// Insung="ì·¨ì†Œ"
if (insungState == "ì·¨ì†Œ")
{
    await UpdateKaiStateAsync(item, "ì·¨ì†Œ");
    await CancelOtherAppsAsync(item);
    return SuccessAndComplete("ì£¼ë¬¸ ì·¨ì†Œë¨");
}
```

---

## ğŸ—ï¸ 4. ê³¨ê²© êµ¬ì¡° ì„¤ê³„

### 4.1 AutoAllocModelì— RunStartTime ì¶”ê°€ âœ…
```csharp
public class AutoAllocModel
{
    // ... ê¸°ì¡´ í•„ë“œë“¤ ...

    /// <summary>
    /// ì¸ì„± "ìš´í–‰" ìƒíƒœ ì§„ì… ì‹œê°„ (40ì´ˆ íƒ€ì´ë¨¸ìš©)
    /// </summary>
    public DateTime? RunStartTime { get; set; } = null;
}
```

### 4.2 í—¬í¼ í´ë˜ìŠ¤ ë° í•¨ìˆ˜

#### AppStateInfo í´ë˜ìŠ¤
```csharp
/// <summary>
/// ì™¸ë¶€ ì•± ìƒíƒœ ì •ë³´
/// </summary>
public class AppStateInfo
{
    public string AppName { get; set; }      // "Insung1", "Insung2", "Hwamul24", "OneCall"
    public string SeqNo { get; set; }        // ì£¼ë¬¸ë²ˆí˜¸
    public string State { get; set; }        // "ì ‘ìˆ˜", "ë°°ì°¨", "ìš´í–‰", "ì™„ë£Œ", "ì·¨ì†Œ", null
    public bool Exists => !string.IsNullOrEmpty(SeqNo);
    public bool IsRunning => State == "ìš´í–‰";
}

/// <summary>
/// ìˆ˜ë™ ì„ íƒ ê²°ê³¼
/// </summary>
public class ManualSelectionResult
{
    public bool UserCancelled { get; set; }  // ì‚¬ìš©ìê°€ ì·¨ì†Œí•¨
    public string SelectedApp { get; set; }  // ì„ íƒëœ ì•± ì´ë¦„
}
```

#### GetOtherAppStatesAsync í•¨ìˆ˜
```csharp
/// <summary>
/// ë‹¤ë¥¸ ì•±ë“¤ì˜ í˜„ì¬ ìƒíƒœ ì¡°íšŒ
/// </summary>
private async Task<List<AppStateInfo>> GetOtherAppStatesAsync(AutoAllocModel item)
{
    var states = new List<AppStateInfo>();

    // Insung2 ìƒíƒœ ì¡°íšŒ
    if (!string.IsNullOrEmpty(item.NewOrder.Insung2))
    {
        string state = await GetInsung2StateAsync(item.NewOrder.Insung2);
        states.Add(new AppStateInfo
        {
            AppName = "Insung2",
            SeqNo = item.NewOrder.Insung2,
            State = state
        });
    }

    // í™”ë¬¼24ì‹œ ìƒíƒœ ì¡°íšŒ
    if (!string.IsNullOrEmpty(item.NewOrder.Hwamul24))
    {
        string state = await GetHwamul24StateAsync(item.NewOrder.Hwamul24);
        states.Add(new AppStateInfo
        {
            AppName = "Hwamul24",
            SeqNo = item.NewOrder.Hwamul24,
            State = state
        });
    }

    // ì›ì½œ ìƒíƒœ ì¡°íšŒ
    if (!string.IsNullOrEmpty(item.NewOrder.OneCall))
    {
        string state = await GetOneCallStateAsync(item.NewOrder.OneCall);
        states.Add(new AppStateInfo
        {
            AppName = "OneCall",
            SeqNo = item.NewOrder.OneCall,
            State = state
        });
    }

    return states;
}

// TODO: ê° ì•±ë³„ ìƒíƒœ ì¡°íšŒ í•¨ìˆ˜ êµ¬í˜„
private async Task<string> GetInsung2StateAsync(string seqNo) { /* êµ¬í˜„ í•„ìš” */ }
private async Task<string> GetHwamul24StateAsync(string seqNo) { /* êµ¬í˜„ í•„ìš” */ }
private async Task<string> GetOneCallStateAsync(string seqNo) { /* êµ¬í˜„ í•„ìš” */ }
```

#### ShowManualSelectionDialogAsync í•¨ìˆ˜
```csharp
/// <summary>
/// ì¶©ëŒ ì‹œ ìˆ˜ë™ ì„ íƒ ëŒ€í™”ìƒì í‘œì‹œ
/// </summary>
private async Task<ManualSelectionResult> ShowManualSelectionDialogAsync(
    AutoAllocModel item,
    List<AppStateInfo> runningApps,
    CancelTokenControl ctrl)
{
    // WPF ëŒ€í™”ìƒì í‘œì‹œ (UI ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰)
    return await Application.Current.Dispatcher.InvokeAsync(() =>
    {
        var dialog = new ManualSelectionDialog
        {
            KeyCode = item.KeyCode,
            Message = $"âš ï¸ 2ê°œ ì´ìƒì˜ ì•±ì—ì„œ ìš´í–‰ ì¤‘ì…ë‹ˆë‹¤!\n\n" +
                      $"Insung1: {item.NewOrder.Insung1} (ìš´í–‰)\n" +
                      string.Join("\n", runningApps.Select(a => $"{a.AppName}: {a.SeqNo} (ìš´í–‰)")),
            Options = new[] { "Insung1" }.Concat(runningApps.Select(a => a.AppName)).ToList()
        };

        bool? result = dialog.ShowDialog();

        if (result == true)
        {
            return new ManualSelectionResult
            {
                UserCancelled = false,
                SelectedApp = dialog.SelectedApp
            };
        }
        else
        {
            return new ManualSelectionResult
            {
                UserCancelled = true
            };
        }
    });
}
```

#### CancelUnselectedAppsAsync í•¨ìˆ˜
```csharp
/// <summary>
/// ì„ íƒë˜ì§€ ì•Šì€ ì•±ë“¤ ì·¨ì†Œ
/// </summary>
private async Task CancelUnselectedAppsAsync(AutoAllocModel item, string selectedApp, CancelTokenControl ctrl)
{
    Debug.WriteLine($"[CancelUnselectedAppsAsync] ì„ íƒëœ ì•±: {selectedApp}");

    // Insung1ì´ ì„ íƒë˜ì§€ ì•Šì•˜ìœ¼ë©´ ì·¨ì†Œ
    if (selectedApp != "Insung1")
    {
        Debug.WriteLine($"  - Insung1 ì·¨ì†Œ (ë‹¤ë¥¸ ì•± ì„ íƒë¨)");
        // TODO: Insung1 ì·¨ì†Œ ë¡œì§
    }

    // Insung2 ì·¨ì†Œ
    if (!string.IsNullOrEmpty(item.NewOrder.Insung2) && selectedApp != "Insung2")
    {
        Debug.WriteLine($"  - Insung2 ì·¨ì†Œ: {item.NewOrder.Insung2}");
        // TODO: Insung2 ì·¨ì†Œ ë¡œì§
    }

    // í™”ë¬¼24ì‹œ ì·¨ì†Œ
    if (!string.IsNullOrEmpty(item.NewOrder.Hwamul24) && selectedApp != "Hwamul24")
    {
        Debug.WriteLine($"  - í™”ë¬¼24ì‹œ ì·¨ì†Œ: {item.NewOrder.Hwamul24}");
        // TODO: í™”ë¬¼24ì‹œ ì·¨ì†Œ ë¡œì§
    }

    // ì›ì½œ ì·¨ì†Œ
    if (!string.IsNullOrEmpty(item.NewOrder.OneCall) && selectedApp != "OneCall")
    {
        Debug.WriteLine($"  - ì›ì½œ ì·¨ì†Œ: {item.NewOrder.OneCall}");
        // TODO: ì›ì½œ ì·¨ì†Œ ë¡œì§
    }
}
```

---

### 4.3 CheckIsOrderAsync_KaiSameInsungIfChanged êµ¬í˜„ (í•µì‹¬)
```csharp
public async Task<CommonResult_AutoAllocProcess> CheckIsOrderAsync_KaiSameInsungIfChanged(
    AutoAllocModel item,
    CommonResult_AutoAllocDatagrid dgInfo,
    CancelTokenControl ctrl)
{
    string kaiState = item.NewOrder.OrderState;
    string insungState = dgInfo.sStatus;

    Debug.WriteLine($"[CheckIsOrderAsync_KaiSameInsungIfChanged]");
    Debug.WriteLine($"  KeyCode: {item.KeyCode}");
    Debug.WriteLine($"  Kai ìƒíƒœ: {kaiState}, Insung ìƒíƒœ: {insungState}");

    // ===== ì‹œë‚˜ë¦¬ì˜¤ 1: Insung "ì ‘ìˆ˜/ë°°ì°¨" â†’ Kai "ì ‘ìˆ˜" =====
    if (kaiState == "ì ‘ìˆ˜" && (insungState == "ì ‘ìˆ˜" || insungState == "ë°°ì°¨"))
    {
        // ìš´í–‰ íƒ€ì´ë¨¸ê°€ ìˆì—ˆë‹¤ë©´ ë¦¬ì…‹ (ì‹œë‚˜ë¦¬ì˜¤ 4)
        if (item.RunStartTime != null)
        {
            Debug.WriteLine($"  â†’ ìš´í–‰ ì·¨ì†Œ ê°ì§€ (íƒ€ì´ë¨¸ ë¦¬ì…‹)");
            item.RunStartTime = null;
        }
        return CommonResult_AutoAllocProcess.SuccessAndReEnqueue();
    }

    // ===== ì‹œë‚˜ë¦¬ì˜¤ 2: Insung "ìš´í–‰" ì§„ì… â†’ íƒ€ì´ë¨¸ ì‹œì‘ =====
    if (kaiState == "ì ‘ìˆ˜" && insungState == "ìš´í–‰")
    {
        if (item.RunStartTime == null)
        {
            // ìš´í–‰ ì§„ì… - íƒ€ì´ë¨¸ ì‹œì‘
            item.RunStartTime = DateTime.Now;
            Debug.WriteLine($"  â†’ ìš´í–‰ ì§„ì… - 40ì´ˆ íƒ€ì´ë¨¸ ì‹œì‘");
        }
        else
        {
            // ìš´í–‰ ì¤‘ - 40ì´ˆ ê²½ê³¼ ì²´í¬ (ì‹œë‚˜ë¦¬ì˜¤ 3)
            TimeSpan elapsed = DateTime.Now - item.RunStartTime.Value;
            Debug.WriteLine($"  â†’ ìš´í–‰ ì¤‘ - ê²½ê³¼ ì‹œê°„: {elapsed.TotalSeconds:F1}ì´ˆ");

            if (elapsed.TotalSeconds >= 40)
            {
                // 40ì´ˆ ê²½ê³¼! ê¸°ì‚¬ í™•ì •
                Debug.WriteLine($"  â†’ 40ì´ˆ ê²½ê³¼! ê¸°ì‚¬ í™•ì • (Kai: ì ‘ìˆ˜ â†’ ë°°ì°¨)");

                // Kai DB ì—…ë°ì´íŠ¸
                StdResult_Int updateResult = await CommonVars.s_SrGClient.SrResult_OnlyOrderState_UpdateRowAsync_Today(
                    item.NewOrder,
                    "ë°°ì°¨"
                );

                if (updateResult.nResult <= 0)
                {
                    Debug.WriteLine($"  â†’ Kai DB ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: {updateResult.sErrNPos}");
                    return CommonResult_AutoAllocProcess.FailureAndRetry(updateResult.sErrNPos);
                }

                Debug.WriteLine($"  â†’ Kai DB ì—…ë°ì´íŠ¸ ì„±ê³µ: ì ‘ìˆ˜ â†’ ë°°ì°¨");

                // ë‹¤ë¥¸ ì•± ì·¨ì†Œ ì²˜ë¦¬
                await CancelOtherAppsAsync(item, ctrl);

                // íƒ€ì´ë¨¸ ë¦¬ì…‹
                item.RunStartTime = null;

                // ê³„ì† ëª¨ë‹ˆí„°ë§ (ì™„ë£Œê¹Œì§€)
                return CommonResult_AutoAllocProcess.SuccessAndReEnqueue();
            }
        }

        // 40ì´ˆ ë¯¸ê²½ê³¼ - ê³„ì† ëª¨ë‹ˆí„°ë§
        return CommonResult_AutoAllocProcess.SuccessAndReEnqueue();
    }

    // ===== ì‹œë‚˜ë¦¬ì˜¤ 5: Insung "ì™„ë£Œ" =====
    if (kaiState == "ë°°ì°¨" && insungState == "ì™„ë£Œ")
    {
        Debug.WriteLine($"  â†’ ë°°ì†¡ ì™„ë£Œ ê°ì§€ (Kai: ë°°ì°¨ â†’ ì™„ë£Œ)");

        // Kai DB ì—…ë°ì´íŠ¸
        StdResult_Int updateResult = await CommonVars.s_SrGClient.SrResult_OnlyOrderState_UpdateRowAsync_Today(
            item.NewOrder,
            "ì™„ë£Œ"
        );

        if (updateResult.nResult <= 0)
        {
            Debug.WriteLine($"  â†’ Kai DB ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: {updateResult.sErrNPos}");
            return CommonResult_AutoAllocProcess.FailureAndRetry(updateResult.sErrNPos);
        }

        Debug.WriteLine($"  â†’ Kai DB ì—…ë°ì´íŠ¸ ì„±ê³µ: ë°°ì°¨ â†’ ì™„ë£Œ");

        // ëª¨ë‹ˆí„°ë§ ì¢…ë£Œ
        return CommonResult_AutoAllocProcess.SuccessAndComplete("ë°°ì†¡ ì™„ë£Œ");
    }

    // ===== ì‹œë‚˜ë¦¬ì˜¤ 6: Insung "ì·¨ì†Œ" =====
    if (insungState == "ì·¨ì†Œ")
    {
        Debug.WriteLine($"  â†’ ì£¼ë¬¸ ì·¨ì†Œ ê°ì§€ (Kai: {kaiState} â†’ ì·¨ì†Œ)");

        // Kai DB ì—…ë°ì´íŠ¸
        StdResult_Int updateResult = await CommonVars.s_SrGClient.SrResult_OnlyOrderState_UpdateRowAsync_Today(
            item.NewOrder,
            "ì·¨ì†Œ"
        );

        if (updateResult.nResult <= 0)
        {
            Debug.WriteLine($"  â†’ Kai DB ì—…ë°ì´íŠ¸ ì‹¤íŒ¨: {updateResult.sErrNPos}");
            return CommonResult_AutoAllocProcess.FailureAndRetry(updateResult.sErrNPos);
        }

        Debug.WriteLine($"  â†’ Kai DB ì—…ë°ì´íŠ¸ ì„±ê³µ: {kaiState} â†’ ì·¨ì†Œ");

        // ë‹¤ë¥¸ ì•± ì·¨ì†Œ ì²˜ë¦¬
        await CancelOtherAppsAsync(item, ctrl);

        // ëª¨ë‹ˆí„°ë§ ì¢…ë£Œ
        return CommonResult_AutoAllocProcess.SuccessAndComplete("ì£¼ë¬¸ ì·¨ì†Œë¨");
    }

    // ===== ë¯¸ì •ì˜ ì „í™˜ =====
    Debug.WriteLine($"  â†’ ë¯¸ì •ì˜ ì „í™˜: Kai={kaiState}, Insung={insungState}");
    return CommonResult_AutoAllocProcess.FailureAndDiscard(
        $"ë¯¸ì •ì˜ ìƒíƒœ ì „í™˜: Kai={kaiState}, Insung={insungState}",
        "CheckIsOrderAsync_KaiSameInsungIfChanged");
}

/// <summary>
/// ë‹¤ë¥¸ ì•±ë“¤ ì·¨ì†Œ ì²˜ë¦¬
/// </summary>
private async Task CancelOtherAppsAsync(AutoAllocModel item, CancelTokenControl ctrl)
{
    Debug.WriteLine($"[CancelOtherAppsAsync] ë‹¤ë¥¸ ì•± ì·¨ì†Œ ì‹œì‘: KeyCode={item.KeyCode}");

    // Insung2 ì·¨ì†Œ
    if (!string.IsNullOrEmpty(item.NewOrder.Insung2))
    {
        Debug.WriteLine($"  - Insung2 ì·¨ì†Œ: {item.NewOrder.Insung2}");
        // TODO: Insung2 ì·¨ì†Œ ë¡œì§
    }

    // í™”ë¬¼24ì‹œ ì·¨ì†Œ
    if (!string.IsNullOrEmpty(item.NewOrder.Hwamul24))
    {
        Debug.WriteLine($"  - í™”ë¬¼24ì‹œ ì·¨ì†Œ: {item.NewOrder.Hwamul24}");
        // TODO: í™”ë¬¼24ì‹œ ì·¨ì†Œ ë¡œì§
    }

    // ì›ì½œ ì·¨ì†Œ
    if (!string.IsNullOrEmpty(item.NewOrder.OneCall))
    {
        Debug.WriteLine($"  - ì›ì½œ ì·¨ì†Œ: {item.NewOrder.OneCall}");
        // TODO: ì›ì½œ ì·¨ì†Œ ë¡œì§
    }

    Debug.WriteLine($"[CancelOtherAppsAsync] ë‹¤ë¥¸ ì•± ì·¨ì†Œ ì™„ë£Œ");
}
```

---

## ğŸ¬ 5. êµ¬í˜„ ë‹¨ê³„

### Phase 1: ê¸°ë³¸ ê³¨ê²© (í•µì‹¬) âš ï¸
- [x] AutoAllocModelì— RunStartTime í•„ë“œ ì¶”ê°€ âœ…
- [ ] AppStateInfo, ManualSelectionResult í´ë˜ìŠ¤ ìƒì„±
- [ ] CheckIsOrderAsync_KaiSameInsungIfChanged êµ¬í˜„ (ì¶©ëŒ ì²´í¬ ì œì™¸)
- [ ] CancelOtherAppsAsync í•¨ìˆ˜ ìŠ¤í… êµ¬í˜„
- [ ] NwInsung01.cs Line 577 ì£¼ì„ í•´ì œ ë° ê¸°ë³¸ í…ŒìŠ¤íŠ¸

### Phase 2: ì¶©ëŒ ê°ì§€ ë° ìˆ˜ë™ ì„ íƒ (ì¤‘ìš”!) âš ï¸
- [ ] GetOtherAppStatesAsync í•¨ìˆ˜ êµ¬í˜„
  - [ ] GetInsung2StateAsync êµ¬í˜„
  - [ ] GetHwamul24StateAsync êµ¬í˜„
  - [ ] GetOneCallStateAsync êµ¬í˜„
- [ ] ManualSelectionDialog WPF ëŒ€í™”ìƒì ìƒì„±
- [ ] ShowManualSelectionDialogAsync í•¨ìˆ˜ êµ¬í˜„
- [ ] CancelUnselectedAppsAsync í•¨ìˆ˜ êµ¬í˜„
- [ ] ì¶©ëŒ ì‹œë‚˜ë¦¬ì˜¤ í†µí•© í…ŒìŠ¤íŠ¸

### Phase 3: ë‹¤ì¤‘ ì•± ì·¨ì†Œ ë¡œì§
- [ ] Insung2 ì·¨ì†Œ ë¡œì§ êµ¬í˜„
- [ ] í™”ë¬¼24ì‹œ ì·¨ì†Œ ë¡œì§ êµ¬í˜„
- [ ] ì›ì½œ ì·¨ì†Œ ë¡œì§ êµ¬í˜„

### Phase 4: ì˜ˆì™¸ ì²˜ë¦¬ ë° ì•ˆì •í™”
- [ ] ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì²˜ë¦¬
- [ ] íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬
- [ ] ëŒ€í™”ìƒì í‘œì‹œ ì‹¤íŒ¨ ì²˜ë¦¬
- [ ] ë¡œê¹… ì •ë¦¬

### Phase 5: í†µí•© í…ŒìŠ¤íŠ¸
- [ ] ì‹œë‚˜ë¦¬ì˜¤ 1~6 ì „ì²´ í…ŒìŠ¤íŠ¸
- [ ] ì¶©ëŒ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ (2ì¤‘, 3ì¤‘ ë°°ì°¨)
- [ ] 40ì´ˆ ê²½ê³„ í…ŒìŠ¤íŠ¸ (39ì´ˆ, 40ì´ˆ, 41ì´ˆ)
- [ ] ì‚¬ìš©ì ì·¨ì†Œ í…ŒìŠ¤íŠ¸
- [ ] ì„±ëŠ¥ ìµœì í™”

---

## ğŸ“ 6. í•µì‹¬ ê²°ì • ì‚¬í•­ (í™•ì •ë¨ âœ…)

### âœ… ì¸ì„± ìƒíƒœ ë§¤í•‘ (í•µì‹¬!)
```
Kai "ì ‘ìˆ˜" = Insung "ì ‘ìˆ˜" OR "ë°°ì°¨" OR "ìš´í–‰(40ì´ˆ ì´ë‚´)"
Kai "ë°°ì°¨" = Insung "ìš´í–‰(40ì´ˆ ê²½ê³¼)" â†’ ì´ ì‹œì ì— ë‹¤ë¥¸ ì•± ì·¨ì†Œ!
```

### âœ… 40ì´ˆ íƒ€ì´ë¨¸
- **RunStartTime í•„ë“œ**: AutoAllocModelì— ì¶”ê°€
- **ì‹œì‘**: Insung "ìš´í–‰" ì§„ì… ì‹œ
- **ë¦¬ì…‹**: Insung "ì ‘ìˆ˜/ë°°ì°¨"ë¡œ ëŒì•„ê°ˆ ë•Œ
- **í™•ì •**: 40ì´ˆ ê²½ê³¼ ì‹œ Kai DB ì—…ë°ì´íŠ¸ + ë‹¤ë¥¸ ì•± ì·¨ì†Œ

### âœ… ë‹¤ë¥¸ ì•± ì·¨ì†Œ íƒ€ì´ë°
- **Insung "ìš´í–‰" 40ì´ˆ ê²½ê³¼ ì‹œ**:
  1. ë‹¤ë¥¸ ì•± ìƒíƒœ ì²´í¬ (ì¶©ëŒ ê°ì§€)
  2. ì¶©ëŒ ì—†ìœ¼ë©´ â†’ ìë™ ì·¨ì†Œ (ì ‘ìˆ˜/ë°°ì°¨ ìƒíƒœì¸ ì•±ë“¤)
  3. ì¶©ëŒ ìˆìœ¼ë©´ â†’ ìˆ˜ë™ ì„ íƒ ëŒ€í™”ìƒì â†’ ì„ íƒëœ ì•±ë§Œ ìœ ì§€
- **Insung "ì·¨ì†Œ" ì‹œ**: ëª¨ë“  ì™¸ë¶€ ì•± ì·¨ì†Œ

### âœ… ì¶©ëŒ ì²˜ë¦¬ (2ì¤‘ ë°°ì°¨)
**ìƒí™©**: Insung1 "ìš´í–‰" 40ì´ˆ ê²½ê³¼ + ë‹¤ë¥¸ ì•±ë„ "ìš´í–‰" ì¤‘
**í•´ê²°**:
1. ìˆ˜ë™ ì„ íƒ ëŒ€í™”ìƒì í‘œì‹œ (WPF)
2. ì˜µì…˜: [Insung1] [Insung2] [Hwamul24] [OneCall] [ì·¨ì†Œ]
3. ì‚¬ìš©ì ì„ íƒ â†’ ì„ íƒëœ ì•±ë§Œ ìœ ì§€, ë‚˜ë¨¸ì§€ ì·¨ì†Œ
4. ì‚¬ìš©ìê°€ [ì·¨ì†Œ] â†’ ì¬ì ì¬ (ë‚˜ì¤‘ì— ë‹¤ì‹œ ì²˜ë¦¬)

### âœ… ëª¨ë‹ˆí„°ë§ ì¢…ë£Œ ì¡°ê±´
- **Insung "ì™„ë£Œ"**: Kai "ë°°ì°¨" â†’ "ì™„ë£Œ" ì—…ë°ì´íŠ¸ í›„ ì¢…ë£Œ
- **Insung "ì·¨ì†Œ"**: Kai ìƒíƒœ â†’ "ì·¨ì†Œ" ì—…ë°ì´íŠ¸ í›„ ì¢…ë£Œ

---

## ğŸ” 7. ëª¨ë‹ˆí„°ë§ í¬ì¸íŠ¸

### ë¡œê·¸ ë ˆë²¨
- **INFO**: ìƒíƒœ ì „í™˜ ê°ì§€, 40ì´ˆ íƒ€ì´ë¨¸ ì‹œì‘/ë¦¬ì…‹/í™•ì •
- **WARN**: ë¯¸ì •ì˜ ì „í™˜, DB ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ (ì¬ì‹œë„), **ì¶©ëŒ ê°ì§€**
- **ERROR**: ë‹¤ë¥¸ ì•± ì·¨ì†Œ ì‹¤íŒ¨, ëŒ€í™”ìƒì í‘œì‹œ ì‹¤íŒ¨

### ì£¼ìš” ë©”íŠ¸ë¦­
- 40ì´ˆ íƒ€ì´ë¨¸ ë°œë™ íšŸìˆ˜
- 40ì´ˆ ë‚´ ì·¨ì†Œ ë¹„ìœ¨ vs í™•ì • ë¹„ìœ¨
- **ì¶©ëŒ ë°œìƒ íšŸìˆ˜ (2ì¤‘, 3ì¤‘ ë°°ì°¨)**
- **ìˆ˜ë™ ì„ íƒ ë¹„ìœ¨ (ìë™ vs ìˆ˜ë™)**
- ë‹¤ë¥¸ ì•± ì·¨ì†Œ ì„±ê³µë¥ 
- Kai DB ì—…ë°ì´íŠ¸ ì„±ê³µë¥ 

### ë””ë²„ê·¸ ì¶œë ¥ (ì¤‘ìš”)

#### ì •ìƒ íë¦„
```
[CheckIsOrderAsync_KaiSameInsungIfChanged]
  KeyCode: 12345
  Kai ìƒíƒœ: ì ‘ìˆ˜, Insung ìƒíƒœ: ìš´í–‰
  â†’ ìš´í–‰ ì§„ì… - 40ì´ˆ íƒ€ì´ë¨¸ ì‹œì‘

[CheckIsOrderAsync_KaiSameInsungIfChanged]
  KeyCode: 12345
  Kai ìƒíƒœ: ì ‘ìˆ˜, Insung ìƒíƒœ: ìš´í–‰
  â†’ ìš´í–‰ ì¤‘ - ê²½ê³¼ ì‹œê°„: 42.3ì´ˆ
  â†’ 40ì´ˆ ê²½ê³¼! ê¸°ì‚¬ í™•ì •
  â†’ ì¶©ëŒ ì—†ìŒ, ë‹¤ë¥¸ ì•± ìë™ ì·¨ì†Œ ì§„í–‰
  â†’ Kai DB ì—…ë°ì´íŠ¸ ì„±ê³µ: ì ‘ìˆ˜ â†’ ë°°ì°¨
[CancelOtherAppsAsync] ë‹¤ë¥¸ ì•± ì·¨ì†Œ ì‹œì‘
  - Insung2 ì·¨ì†Œ: IS2-12345
  - í™”ë¬¼24ì‹œ ì·¨ì†Œ: HW-12345
```

#### ì¶©ëŒ íë¦„
```
[CheckIsOrderAsync_KaiSameInsungIfChanged]
  KeyCode: 12345
  Kai ìƒíƒœ: ì ‘ìˆ˜, Insung ìƒíƒœ: ìš´í–‰
  â†’ ìš´í–‰ ì¤‘ - ê²½ê³¼ ì‹œê°„: 42.3ì´ˆ
  â†’ 40ì´ˆ ê²½ê³¼! ê¸°ì‚¬ í™•ì •
  âš ï¸ ì¶©ëŒ ê°ì§€! ìš´í–‰ ì¤‘ì¸ ë‹¤ë¥¸ ì•±: Insung2, Hwamul24
  â†’ ìˆ˜ë™ ì„ íƒ ëŒ€í™”ìƒì í‘œì‹œ
  â†’ ì‚¬ìš©ì ì„ íƒ: Insung1
[CancelUnselectedAppsAsync] ì„ íƒëœ ì•±: Insung1
  - Insung2 ì·¨ì†Œ: IS2-12345
  - í™”ë¬¼24ì‹œ ì·¨ì†Œ: HW-12345
  â†’ Kai DB ì—…ë°ì´íŠ¸ ì„±ê³µ: ì ‘ìˆ˜ â†’ ë°°ì°¨
```

---

## ğŸ“Š 8. ì „ì²´ íë¦„ ìš”ì•½

### ì •ìƒ íë¦„ (ë°°ì†¡ ì™„ë£Œ)
```
1. Kai DB: ì ‘ìˆ˜ â†’ Insung1 ë“±ë¡
2. Insung1: ì ‘ìˆ˜ â†’ (Kai: ì ‘ìˆ˜ ìœ ì§€)
3. Insung1: ë°°ì°¨ â†’ (Kai: ì ‘ìˆ˜ ìœ ì§€)
4. Insung1: ìš´í–‰ ì§„ì… â†’ (íƒ€ì´ë¨¸ ì‹œì‘, Kai: ì ‘ìˆ˜ ìœ ì§€)
5. 40ì´ˆ ê²½ê³¼ â†’ ë‹¤ë¥¸ ì•± ìƒíƒœ ì²´í¬
   - ì¶©ëŒ ì—†ìŒ â†’ (Kai: ì ‘ìˆ˜ â†’ ë°°ì°¨, ë‹¤ë¥¸ ì•± ìë™ ì·¨ì†Œ)
6. Insung1: ì™„ë£Œ â†’ (Kai: ë°°ì°¨ â†’ ì™„ë£Œ, ëª¨ë‹ˆí„°ë§ ì¢…ë£Œ)
```

### ì¶©ëŒ íë¦„ (2ì¤‘ ë°°ì°¨!) âš ï¸
```
1. Kai DB: ì ‘ìˆ˜ â†’ Insung1, Insung2 ë“±ë¡
2. Insung1: ìš´í–‰ ì§„ì… â†’ (íƒ€ì´ë¨¸ ì‹œì‘)
3. Insung2: ìš´í–‰ ì§„ì… â†’ (Insung2ë„ ìš´í–‰ ì¤‘)
4. 40ì´ˆ ê²½ê³¼ (Insung1) â†’ ë‹¤ë¥¸ ì•± ìƒíƒœ ì²´í¬
   - Insung2ë„ "ìš´í–‰" â†’ âš ï¸ ì¶©ëŒ ê°ì§€!
5. ìˆ˜ë™ ì„ íƒ ëŒ€í™”ìƒì í‘œì‹œ
   [Insung1 ì„ íƒ] / [Insung2 ì„ íƒ] / [ì·¨ì†Œ]
6. ì‚¬ìš©ìê°€ Insung1 ì„ íƒ â†’ Insung2 ì·¨ì†Œ, Kai: ì ‘ìˆ˜ â†’ ë°°ì°¨
   ë˜ëŠ”
   ì‚¬ìš©ìê°€ Insung2 ì„ íƒ â†’ Insung1 ì·¨ì†Œ, Kai: ì ‘ìˆ˜ â†’ ë°°ì°¨
   ë˜ëŠ”
   ì‚¬ìš©ìê°€ ì·¨ì†Œ â†’ ì¬ì ì¬ (ë‚˜ì¤‘ì— ë‹¤ì‹œ ì²˜ë¦¬)
```

### 40ì´ˆ ë‚´ ì·¨ì†Œ íë¦„
```
1. Kai DB: ì ‘ìˆ˜ â†’ Insung1 ë“±ë¡
2. Insung1: ì ‘ìˆ˜ â†’ (Kai: ì ‘ìˆ˜ ìœ ì§€)
3. Insung1: ë°°ì°¨ â†’ (Kai: ì ‘ìˆ˜ ìœ ì§€)
4. Insung1: ìš´í–‰ ì§„ì… â†’ (íƒ€ì´ë¨¸ ì‹œì‘, Kai: ì ‘ìˆ˜ ìœ ì§€)
5. 10ì´ˆ í›„ Insung1: ë°°ì°¨ë¡œ ë³µê·€ â†’ (íƒ€ì´ë¨¸ ë¦¬ì…‹, Kai: ì ‘ìˆ˜ ìœ ì§€)
6. ë‹¤ë¥¸ ì•± ê³„ì† ìœ íš¨ (ì·¨ì†Œ ì•ˆ ë¨)
```

### ì·¨ì†Œ íë¦„
```
1. Kai DB: ì ‘ìˆ˜ â†’ Insung1 ë“±ë¡
2. Insung1: ì·¨ì†Œ â†’ (Kai: ì ‘ìˆ˜ â†’ ì·¨ì†Œ, ë‹¤ë¥¸ ì•± ì·¨ì†Œ, ëª¨ë‹ˆí„°ë§ ì¢…ë£Œ)
```

---

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-11-07
