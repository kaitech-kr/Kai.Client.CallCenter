# ì‘ì—… ê¸°ë¡ í†µí•© ë¬¸ì„œ

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-11-26

---

## ğŸ“Œ í˜„ì¬ ì‘ì—… ìƒíƒœ

### ğŸ”¨ ë‹¤ìŒ ì‘ì—…: í™”ë¬¼24ì‹œ, ì›ì½œ ìë™ë°°ì°¨ êµ¬í˜„

**ëª©í‘œ**: ì¸ì„±ê³¼ ë™ì¼í•œ ìë™ë°°ì°¨ êµ¬ì¡°ë¥¼ í™”ë¬¼24ì‹œ, ì›ì½œì—ë„ ì ìš©

**ì§„í–‰ ë°©ì‹**: ì¡°ê¸ˆì”© ëª¨ë“  ì½”ë“œë¥¼ í…ŒìŠ¤íŠ¸í•˜ë©´ì„œ ì§„í–‰

**ì°¸ê³  íŒŒì¼**:
- ì¸ì„± ìë™ë°°ì°¨: `NwInsung01.cs`, `InsungsAct_RcptRegPage.cs`
- í™”ë¬¼24ì‹œ: `Cargo24sAct_RcptRegPage.cs`
- ì›ì½œ: `OnecallAct_RcptRegPage.cs`

---

## âœ… 2025-11-26 ì™„ë£Œ ì‘ì—…

### 1. OFR ê²€ìƒ‰ ì„±ê³µ ì‹œ Searched ì¹´ìš´íŠ¸ ì¦ê°€ ë¡œì§

**íŒŒì¼**: `OfrWork_Commons.cs`

**êµ¬í˜„ ë‚´ìš©**:

1. **TbChar ê²€ìƒ‰ ì„±ê³µ ì‹œ Searched ì¦ê°€** (Line 279-293)
   ```csharp
   private static async Task<string> SelectCharByBasicAsync(int width, int height, string hexString)
   {
       PgResult_TbChar result = await PgService_TbChar.SelectRowByBasicAsync(width, height, hexString);
       if (result?.tbChar != null)
       {
           // Searchedê°€ 10ë³´ë‹¤ ì‘ìœ¼ë©´ 1 ì¦ê°€í•˜ì—¬ ì—…ë°ì´íŠ¸
           if (result.tbChar.Searched < 10)
           {
               result.tbChar.Searched++;
               _ = PgService_TbChar.UpdateRowAsync(result.tbChar);
           }
           return result.tbChar.Character;
       }
       return null;
   }
   ```

2. **TbText ê²€ìƒ‰ ì„±ê³µ ì‹œ Searched ì¦ê°€** (2ê³³)
   - `OfrImage_ExactDrawRelRectAsync` (Line 250-258)
   - `OfrStr_ComplexCharSetAsync` (Line 529-534)

### 2. TbCharFail ì €ì¥ ë¡œì§ í™œì„±í™”

**íŒŒì¼**: `OfrWork_Commons.cs`

- OFR ì‹¤íŒ¨ ì‹œ TbCharFail í…Œì´ë¸”ì— ì €ì¥
- ì¤‘ë³µ ì²´í¬ í¬í•¨ (ë™ì¼ íŒ¨í„´ ì¬ì €ì¥ ë°©ì§€)

### 3. bEdit íŒŒë¼ë¯¸í„° ì¼ê´€ì„± ìˆ˜ì •

**íŒŒì¼ë“¤**:
- `InsungsAct_RcptRegPage.cs` (Line 705)
- `Cargo24sAct_RcptRegPage.cs` (Lines 374, 656)
- `OnecallAct_RcptRegPage.cs` (Lines 168, 250)

**ìˆ˜ì • ë‚´ìš©**: `bEdit: false` â†’ `bEdit: bEdit` (íŒŒë¼ë¯¸í„° ì „ë‹¬)

### 4. ImageToCharWnd ê°œì„ 

**íŒŒì¼**: `ImageToCharWnd.xaml.cs`

- ì™¸ë¶€ ì…ë ¥ ì°¨ë‹¨ í•´ì œ: `StdWin32.BlockInput(false)`
- ë¬¸ì ì˜ì—­ ë¹¨ê°„ ì‚¬ê°í˜• í‘œì‹œ (DisplayBitmaps í•¨ìˆ˜)

---

## ğŸ”§ ë¯¸ì ìš© (ëŒ€ê¸° ì¤‘)

### Std32Mouse_Send.cs BlockInput ë²„ê·¸
- Line 195: `BlockInput(true)` â†’ `BlockInput(false)` ìˆ˜ì • í•„ìš”
- ì‚¬ìš©ì ì§€ì‹œ: "ë‚˜ì¤‘ì— ë¬¸ì œ ìƒê¸°ë©´ ê·¸ë•Œ ì¡°ì¹˜"

---

## ğŸ“Š ì¸ì„± ìë™ë°°ì°¨ êµ¬ì¡° ìš”ì•½

### í•µì‹¬ í•¨ìˆ˜ë“¤

1. **CheckIsOrderAsync_InsungOrderManage** - ë©”ì¸ ìƒíƒœ ê´€ë¦¬ í•¨ìˆ˜
2. **InsungOrderManage_ì ‘ìˆ˜Orë°°ì°¨Async** - ì ‘ìˆ˜/ë°°ì°¨ ìƒíƒœ ì²˜ë¦¬
3. **InsungOrderManage_ìš´í–‰Async** - ìš´í–‰ ìƒíƒœ + 40ì´ˆ íƒ€ì´ë¨¸
4. **InsungOrderManage_ì™„ë£ŒAsync** - ì™„ë£Œ ìƒíƒœ ì²˜ë¦¬
5. **InsungOrderManage_ì·¨ì†ŒAsync** - ì·¨ì†Œ ìƒíƒœ ì²˜ë¦¬

### 40ì´ˆ íƒ€ì´ë¨¸ ë¡œì§

```csharp
// ìš´í–‰ ì§„ì… ì‹œ
if (item.RunStartTime == null)
{
    item.RunStartTime = DateTime.Now;
    item.DriverPhone = await GetRowDriverPhNoAsync(...);
}

// 40ì´ˆ ê²½ê³¼ ì‹œ
if (elapsed.TotalSeconds >= 40)
{
    // Kai DB ì—…ë°ì´íŠ¸, ë‹¤ë¥¸ ì•± ì·¨ì†Œ
}

// ìš´í–‰ ì·¨ì†Œ ì‹œ (40ì´ˆ ë‚´)
item.RunStartTime = null;
item.DriverPhone = null;
```

---

## ğŸ“‹ Datagrid ì´ˆê¸°í™” êµ¬ì¡°

### ê³µí†µ íŒ¨í„´ (ì¸ì„±/í™”ë¬¼24ì‹œ/ì›ì½œ)

1. **í—¤ë” ìº¡ì²˜**: Datagrid í•¸ë“¤ + ìƒëŒ€ì¢Œí‘œë¡œ í—¤ë”ë§Œ ìº¡ì²˜
2. **ë°ê¸° ê²€ì¶œ**: `GetMinBrightnessAtRow_FromColorBitmapFast`
3. **ê²½ê³„ ê²€ì¶œ**: `GetLeftWidthList_FromBool1Array`
4. **ì²«/ë§ˆì§€ë§‰ ì œê±°**: í…Œë‘ë¦¬ + ë ì˜ì—­

### ì£¼ìš” ìƒìˆ˜

```csharp
private const int HEADER_HEIGHT = 30;
private const int TARGET_ROW = 2;
private const int OFR_HEIGHT = 20;
private const int MIN_COLUMN_WIDTH = 30;
```

---

## ğŸ”— ìµœê·¼ ì»¤ë°‹

- `3932194` - feat: ìë™ë°°ì°¨ ì´ˆê¸° êµ¬ì¡° í†µì¼ ë° MasterModeManager ê°œì„  (2025-11-23)
- `4af4279` - docs: 2025-11-23 ONECALL ì‘ì—… ê¸°ë¡ ì¶”ê°€
- `dbe76db` - feat: Onecall ì ‘ìˆ˜ë“±ë¡Page ì´ˆê¸°í™” êµ¬í˜„
- `d472584` - refactor: Cargo24 ì½”ë“œ í’ˆì§ˆ ê°œì„  ë° MainWnd ì´ˆê¸°í™” ì•ˆì •ì„± í–¥ìƒ

---
