# Kai UI 개발 계획 및 작업 기록 (Plan)

## 1. 개요
Kai 애플리케이션의 UI 현대화(어두운 모드 지원 및 와이드 해상도 최적화) 작업을 위한 통합 계획서입니다.

## 2. 안전장치 및 백업 정책
*   **XAML 백업 경로**: `D:\CodeWork\WithVs2022\KaiWork\Kai.Client\Kai.Client.CallCenter\XmalBackup`
*   **정책**: 모든 XAML 및 UI 관련 소스 코드 수정 전, 해당 폴더에 현재 시점의 복사본을 생성하여 만약의 경우(레이아웃 붕괴, 빌드 오류 등)에 대비한다.

## 3. UI 디자인 명세 (학습된 내용)
*   **대상 앱**: Kai Tech 콜센터 관리 시스템 (Kai.png 기반)
*   **해상도**: 1920x1080 (16:9 와이드스크린) 최적화
*   **핵심 부품 및 상태**:
    *   **상태 버튼 (6개)**: '접수, 대기, 배차' (Pressed-Dark), '운행, 완료, 취소' (Raised-Light).
    *   **데이터그리드**: 고밀도, 가로 확장 레이아웃.
    *   **테마 시스템**: 실시간 색상 토큰 전환 방식 (Dark/Light).

## 4. 향후 작업 단계
1.  작업 전 `XmalBackup` 폴더에 소스 코드 백업.
2.  `App.xaml` 등 공통 리소스 파일에 테마 색상 토큰 정의.
3.  개별 페이지(XAML) 및 코드 비하인드(.UI.cs)에 테마 엔진 적용.
4.  부품별(버튼, 그리드) 스타일 시뮬레이션 및 검증.

---

## 5. 접수창(Order_ReceiptWnd) 미리생성 구현

### 목적
- 창 열 때 번쩍임(flickering) 방지
- 빠른 창 표시

### 구현 방식: Close 후 미리생성

```csharp
// MainWindow 또는 적절한 위치에 필드 선언
private Order_ReceiptWnd _receiptWnd;

// 앱 시작시 (또는 MainWindow 로드시)
private void InitializeWindows()
{
    _receiptWnd = new Order_ReceiptWnd();
}

// 접수창 열 때
private void OpenReceiptWindow()
{
    if (_receiptWnd == null)
        _receiptWnd = new Order_ReceiptWnd();
    _receiptWnd.Show();
}

// Order_ReceiptWnd.xaml.cs - 닫기 버튼
private void BtnCommon_Close_Click(object sender, RoutedEventArgs e)
{
    this.Close();
    // 부모에게 새 인스턴스 생성 요청 (이벤트 또는 콜백)
}
```

### 구현 단계
1. MainWindow에 `_receiptWnd` 필드 추가
2. 앱 시작시 `InitializeWindows()` 호출
3. 기존 접수창 열기 로직을 `OpenReceiptWindow()`로 변경
4. `BtnCommon_Close_Click` 구현 - Close 후 새 인스턴스 생성
5. 여러 개 동시 열기 필요시 List로 관리

### 장점
- 첫 로드 번쩍임 없음
- 항상 깨끗한 초기 상태
- 메모리 1개분만 유지
- 여러 개 띄우기도 가능

---
*최종 업데이트: 2025-12-30*
